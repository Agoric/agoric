<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="721px" preserveAspectRatio="none" style="width:1851px;height:721px;background:#FFFFFF;" version="1.1" viewBox="0 0 1851 721" width="1851px" zoomAndPan="magnify"><defs><filter height="300%" id="fg724krouinqn" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="176" x="1662.5" y="9.668">Agoric Systems Operating Company.</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="108" x="865.25" y="29.1797">VaultFactory</text><!--MD5=[8a2eb637b9b19418d84b8f66e74da74e]
cluster Vat--><polygon fill="#FFFFFF" filter="url(#fg724krouinqn)" points="944.5,191.4766,954.5,181.4766,1834.5,181.4766,1834.5,687.4766,1824.5,697.4766,944.5,697.4766,944.5,191.4766" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="1824.5" x2="1834.5" y1="191.4766" y2="181.4766"/><line style="stroke:#000000;stroke-width:1.5;" x1="944.5" x2="1824.5" y1="191.4766" y2="191.4766"/><line style="stroke:#000000;stroke-width:1.5;" x1="1824.5" x2="1824.5" y1="191.4766" y2="697.4766"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="24" x="1373.5" y="208.0117">Vat</text><!--MD5=[f8bdb8f2d8c9b7e2f062dc65a90a6e92]
cluster VaultFactory--><polygon fill="#FFFFFF" filter="url(#fg724krouinqn)" points="968.5,239.4766,978.5,229.4766,1671.5,229.4766,1671.5,429.4766,1661.5,439.4766,968.5,439.4766,968.5,239.4766" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="1661.5" x2="1671.5" y1="239.4766" y2="229.4766"/><line style="stroke:#000000;stroke-width:1.5;" x1="968.5" x2="1661.5" y1="239.4766" y2="239.4766"/><line style="stroke:#000000;stroke-width:1.5;" x1="1661.5" x2="1661.5" y1="239.4766" y2="439.4766"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="90" x="1271" y="256.0117">VaultFactory</text><!--MD5=[99c8f1fa4cdca03c066c3375012f7136]
cluster publicAPI--><polygon fill="#FFFFFF" filter="url(#fg724krouinqn)" points="1311.5,287.4766,1321.5,277.4766,1647.5,277.4766,1647.5,405.4766,1637.5,415.4766,1311.5,415.4766,1311.5,287.4766" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="1637.5" x2="1647.5" y1="287.4766" y2="277.4766"/><line style="stroke:#000000;stroke-width:1.5;" x1="1311.5" x2="1637.5" y1="287.4766" y2="287.4766"/><line style="stroke:#000000;stroke-width:1.5;" x1="1637.5" x2="1637.5" y1="287.4766" y2="415.4766"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="68" x="1441.5" y="304.0117">publicAPI</text><!--MD5=[232cf8ad5512aba8c39088a343f64591]
cluster creatorFacet--><polygon fill="#FFFFFF" filter="url(#fg724krouinqn)" points="1077.5,287.4766,1087.5,277.4766,1287.5,277.4766,1287.5,405.4766,1277.5,415.4766,1077.5,415.4766,1077.5,287.4766" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="1277.5" x2="1287.5" y1="287.4766" y2="277.4766"/><line style="stroke:#000000;stroke-width:1.5;" x1="1077.5" x2="1277.5" y1="287.4766" y2="287.4766"/><line style="stroke:#000000;stroke-width:1.5;" x1="1277.5" x2="1277.5" y1="287.4766" y2="415.4766"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="87" x="1135" y="304.0117">creatorFacet</text><!--MD5=[417cef51afa734c49601c72371d80e99]
cluster Vault--><polygon fill="#FFFFFF" filter="url(#fg724krouinqn)" points="976.5,521.4766,986.5,511.4766,1802.5,511.4766,1802.5,655.4766,1792.5,665.4766,976.5,665.4766,976.5,521.4766" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="1792.5" x2="1802.5" y1="521.4766" y2="511.4766"/><line style="stroke:#000000;stroke-width:1.5;" x1="976.5" x2="1792.5" y1="521.4766" y2="521.4766"/><line style="stroke:#000000;stroke-width:1.5;" x1="1792.5" x2="1792.5" y1="521.4766" y2="665.4766"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="38" x="1366.5" y="538.0117">Vault</text><!--MD5=[d26da07a3bd7c17143f45609ee6234d1]
entity AMM--><polygon fill="#FEFECE" filter="url(#fg724krouinqn)" points="984.5,357.4766,994.5,347.4766,1058.5,347.4766,1058.5,383.9648,1048.5,393.9648,984.5,393.9648,984.5,357.4766" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="1048.5" x2="1058.5" y1="357.4766" y2="347.4766"/><line style="stroke:#000000;stroke-width:1.5;" x1="984.5" x2="1048.5" y1="357.4766" y2="357.4766"/><line style="stroke:#000000;stroke-width:1.5;" x1="1048.5" x2="1048.5" y1="357.4766" y2="393.9648"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="34" x="999.5" y="381.0117">AMM</text><!--MD5=[66ceb15796fb2bf373585fde39c5b4b3]
entity getCollaterals--><ellipse cx="1523.5" cy="370.4766" fill="#FEFECE" filter="url(#fg724krouinqn)" rx="8" ry="8" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="1476" y="401.0117">getCollaterals</text><!--MD5=[64e5de53d0c9ddfcd2eb1d28e3b35bc4]
entity makeVaultInvitation--><ellipse cx="1622.5" cy="370.4766" fill="#FEFECE" filter="url(#fg724krouinqn)" rx="8" ry="8" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136" x="1554.5" y="401.0117">makeVaultInvitation</text><!--MD5=[1fb612ddb12759a773b01c69ccf6be01]
entity getRunIssuer--><ellipse cx="1380.5" cy="370.4766" fill="#FEFECE" filter="url(#fg724krouinqn)" rx="8" ry="8" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="1335.5" y="401.0117">getRunIssuer</text><!--MD5=[4d0b1c11acb7b86ed7d724b6216c6d31]
entity makeAddTypeInvitation--><ellipse cx="1182.5" cy="370.4766" fill="#FEFECE" filter="url(#fg724krouinqn)" rx="8" ry="8" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="162" x="1101.5" y="401.0117">makeAddTypeInvitation</text><!--MD5=[06c0c19eef2d500ef65e114e6cfb9915]
entity makeCloseInvitation--><ellipse cx="1077.5" cy="612.4766" fill="#FEFECE" filter="url(#fg724krouinqn)" rx="8" ry="8" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="1008" y="643.0117">makeCloseInvitation</text><!--MD5=[c0fbfa0b94e356be92dac6d7ef4e2fb7]
entity makeAdjustBalancesInvitation--><ellipse cx="1649.5" cy="612.4766" fill="#FEFECE" filter="url(#fg724krouinqn)" rx="8" ry="8" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="204" x="1547.5" y="643.0117">makeAdjustBalancesInvitation</text><!--MD5=[696aa05efa7cd6a86e7ac2f866034347]
entity getCollateralAmount--><ellipse cx="1425.5" cy="612.4766" fill="#FEFECE" filter="url(#fg724krouinqn)" rx="8" ry="8" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="143" x="1354" y="643.0117">getCollateralAmount</text><!--MD5=[ff92a3d63f46ed95f314d84227ca4160]
entity getCurrentDebt--><ellipse cx="1250.5" cy="612.4766" fill="#FEFECE" filter="url(#fg724krouinqn)" rx="8" ry="8" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="1197" y="643.0117">getCurrentDebt</text><!--MD5=[acae44d39ee77ba2e78b684f68d8ffa5]
entity vfc--><ellipse cx="1182.5" cy="46.9766" fill="#FEFECE" filter="url(#fg724krouinqn)" rx="8" ry="8" style="stroke:#A80036;stroke-width:1.5;"/><path d="M1182.5,54.9766 L1182.5,81.9766 M1169.5,62.9766 L1195.5,62.9766 M1182.5,81.9766 L1169.5,96.9766 M1182.5,81.9766 L1195.5,96.9766 " fill="none" filter="url(#fg724krouinqn)" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="250" x="1057.5" y="116.0117">VaultFactoryCreator aka Governance</text><!--MD5=[4a215cce9e0f6d625b32e900af2559df]
entity Borrower--><ellipse cx="417.5" cy="339.4766" fill="#FEFECE" filter="url(#fg724krouinqn)" rx="8" ry="8" style="stroke:#A80036;stroke-width:1.5;"/><path d="M417.5,347.4766 L417.5,374.4766 M404.5,355.4766 L430.5,355.4766 M417.5,374.4766 L404.5,389.4766 M417.5,374.4766 L430.5,389.4766 " fill="none" filter="url(#fg724krouinqn)" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="386" y="408.5117">Borrower</text><!--MD5=[9a500c87b274ebb92425a1f4d4eb730a]
entity AdjustBalancesInvitation--><polygon fill="#FEFECE" filter="url(#fg724krouinqn)" points="721,357.4766,731,347.4766,928,347.4766,928,383.9648,918,393.9648,721,393.9648,721,357.4766" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="918" x2="928" y1="357.4766" y2="347.4766"/><line style="stroke:#000000;stroke-width:1.5;" x1="721" x2="918" y1="357.4766" y2="357.4766"/><line style="stroke:#000000;stroke-width:1.5;" x1="918" x2="918" y1="357.4766" y2="393.9648"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167" x="736" y="381.0117">AdjustBalancesInvitation</text><!--MD5=[01ad0ee252b2307e7dd894e3b8dd3365]
entity CloseVaultInvitation--><polygon fill="#FEFECE" filter="url(#fg724krouinqn)" points="16,357.4766,26,347.4766,193,347.4766,193,383.9648,183,393.9648,16,393.9648,16,357.4766" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="183" x2="193" y1="357.4766" y2="347.4766"/><line style="stroke:#000000;stroke-width:1.5;" x1="16" x2="183" y1="357.4766" y2="357.4766"/><line style="stroke:#000000;stroke-width:1.5;" x1="183" x2="183" y1="357.4766" y2="393.9648"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="137" x="31" y="381.0117">CloseVaultInvitation</text><!--MD5=[1baf3b7099ab4ff20c5603dcac8b5085]
entity getPayout--><ellipse cx="505.5" cy="46.9766" fill="#FEFECE" filter="url(#fg724krouinqn)" rx="8" ry="8" style="stroke:#A80036;stroke-width:1.5;"/><path d="M505.5,54.9766 L505.5,81.9766 M492.5,62.9766 L518.5,62.9766 M505.5,81.9766 L492.5,96.9766 M505.5,81.9766 L518.5,96.9766 " fill="none" filter="url(#fg724krouinqn)" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="471.5" y="116.0117">getPayout</text><!--MD5=[ee0ce818ad4ee855520210f05cc8901d]
entity getPayouts--><ellipse cx="329.5" cy="46.9766" fill="#FEFECE" filter="url(#fg724krouinqn)" rx="8" ry="8" style="stroke:#A80036;stroke-width:1.5;"/><path d="M329.5,54.9766 L329.5,81.9766 M316.5,62.9766 L342.5,62.9766 M329.5,81.9766 L316.5,96.9766 M329.5,81.9766 L342.5,96.9766 " fill="none" filter="url(#fg724krouinqn)" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="292" y="116.0117">getPayouts</text><!--MD5=[a74b86729a2d12db274258c4e28f5cbd]
reverse link CloseVaultInvitation to makeCloseInvitation--><path d="M182.07,394.9766 C234.51,410.5766 305.44,431.1166 368.5,447.4766 C653.44,521.3866 1007.03,596.6166 1068.26,609.5366 " fill="none" id="CloseVaultInvitation-backto-makeCloseInvitation" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="177.05,393.4866,184.5298,399.8938,181.8411,394.9167,186.8181,392.228,177.05,393.4866" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[abe2648156f00449a4cfd1b4499882f1]
reverse link AdjustBalancesInvitation to makeAdjustBalancesInvitation--><path d="M860.61,396.3766 C888.66,414.2166 929.25,436.8966 968.5,447.4766 C1010.37,458.7666 1120.26,452.1866 1163.5,455.4766 C1323.58,467.6666 1376.28,429.1966 1522.5,495.4766 C1579.07,521.1166 1627.55,581.6666 1643.75,603.4766 " fill="none" id="AdjustBalancesInvitation-backto-makeAdjustBalancesInvitation" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="856.22,393.5566,861.6276,401.7881,860.4259,396.2604,865.9536,395.0587,856.22,393.5566" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[bb5e5679383b1b4db80082f55613ba42]
link Borrower to makeVaultInvitation--><path d="M449.23,344.1866 C499.43,304.4866 601.93,230.9566 703.5,203.4766 C799.28,177.5566 1521.14,138.9366 1596.5,203.4766 C1641.38,241.9066 1631.74,323.1966 1625.59,356.1466 " fill="none" id="Borrower-to-makeVaultInvitation" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1624.56,361.3666,1630.2112,353.3003,1625.5186,356.4593,1622.3596,351.7667,1624.56,361.3666" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208" x="1305.5" y="162.0449">open vault and transfer collateral</text><!--MD5=[13500cc5d99bd98bf3c905d51025dfa6]
link makeVaultInvitation to Vault--><path d="M1631.66,375.8366 C1658.83,389.3066 1739.28,433.0866 1775.5,495.4766 C1777.1138,498.2559 1778.6009,501.1324 1779.9708,504.0834 C1780.6558,505.559 1781.3115,507.0531 1781.939,508.5632 C1782.2528,509.3182 1782.5596,510.0771 1782.8595,510.8397 C1782.9344,511.0304 1783.009,511.2212 1783.0831,511.4123 " fill="none" id="makeVaultInvitation-to-Vault" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1783.0831,511.4123,1783.558,501.5749,1781.2751,506.7507,1776.0994,504.4677,1783.0831,511.4123" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[7ed7662d69d0e45c8b741b9b5141e975]
reverse link getPayout to Borrower--><path d="M491.94,123.7466 C474.88,180.0566 445.86,275.8666 429.55,329.7066 " fill="none" id="getPayout-backto-Borrower" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="493.45,118.7566,487.002,126.2012,491.9936,123.5398,494.6551,128.5314,493.45,118.7566" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="485.5" y="162.0449">retrieve any proceeds</text><!--MD5=[a78d5901bb7019ca7ace937c060c027f]
reverse link getPayouts to Borrower--><path d="M329.95,123.8466 C330.79,137.3566 332.44,152.1366 335.5,165.4766 C349.13,224.8166 377.6,289.4066 397.14,329.6666 " fill="none" id="getPayouts-backto-Borrower" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="329.65,118.5466,326.17,127.7601,329.9352,123.5384,334.1569,127.3037,329.65,118.5466" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="336.5" y="162.0449">retrieve any proceeds</text><!--MD5=[25ffaa321309c54f77c9d82ca0136377]
link Borrower to AdjustBalancesInvitation--><path d="M449.1,370.4766 C505.56,370.4766 626.2,370.4766 715.57,370.4766 " fill="none" id="Borrower-to-AdjustBalancesInvitation" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="720.6,370.4766,711.6,366.4766,715.6,370.4766,711.6,374.4766,720.6,370.4766" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="498.5" y="349.0449">add or remove collateral or</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="235" x="467.5" y="364.3555">increase or decrease the loan balance</text><!--MD5=[cd4ceaf28dfdd4d91383784ae4abdda2]
reverse link CloseVaultInvitation to Borrower--><path d="M198.68,370.4766 C262.22,370.4766 342.15,370.4766 385.67,370.4766 " fill="none" id="CloseVaultInvitation-backto-Borrower" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="193.36,370.4766,202.36,374.4766,198.36,370.4766,202.36,366.4766,193.36,370.4766" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="211.5" y="349.0449">close loan and withdraw</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="214" y="364.3555">any remaining collateral</text><!--MD5=[7ac2801eae909040beeabee850d3aa8f]
link vfc to makeAddTypeInvitation--><path d="M1182.5,118.7566 C1182.5,184.7866 1182.5,313.9066 1182.5,355.9166 " fill="none" id="vfc-to-makeAddTypeInvitation" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1182.5,361.0366,1186.5,352.0366,1182.5,356.0366,1178.5,352.0366,1182.5,361.0366" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[08b8be7f2e6deffb9fee636527697e67]
link Borrower to getCurrentDebt--><path d="M449.22,380.0066 C501.96,394.1566 611.04,423.3366 703.5,447.4766 C772.76,465.5566 788.61,477.6066 859.5,487.4766 C876.73,489.8766 1157.25,487.1066 1172.5,495.4766 C1213.81,518.1566 1237.33,573.1766 1246.28,598.4166 " fill="none" id="Borrower-to-getCurrentDebt" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1247.97,603.3366,1248.8212,593.5246,1246.3418,598.6091,1241.2573,596.1297,1247.97,603.3366" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="860.5" y="476.5449">how much do I owe</text><!--MD5=[3c9fc9bb2ce9f84cc612266d1cd17400]
link Borrower to getCollateralAmount--><path d="M449.17,382.4866 C501.39,400.0466 609.18,433.8066 703.5,447.4766 C734.74,452.0066 957.93,444.4266 987.5,455.4766 C1008.5,463.3266 1005.49,479.6466 1026.5,487.4766 C1058.06,499.2366 1299.22,480.7366 1329.5,495.4766 C1375.34,517.7866 1407.04,573.4166 1419.55,598.6566 " fill="none" id="Borrower-to-getCollateralAmount" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1421.8,603.2766,1421.4659,593.4334,1419.6155,598.779,1414.2698,596.9286,1421.8,603.2766" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="1040.5" y="469.0449">how much did I</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="1027.5" y="484.3555">deposit as collateral</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="29" x="904.75" y="713.1445">v0.0.1</text><!--MD5=[7105ff79760670663b0d0f2ac85c8277]
@startuml VaultFactory
header Agoric Systems Operating Company.
footer v0.0.1
title VaultFactory

skinparam componentStyle rectangle
skinparam defaultTextAlignment center


actor "VaultFactoryCreator aka Governance" as vfc

actor Borrower

node AdjustBalancesInvitation
node "CloseVaultInvitation"

node "Vat" {
    node VaultFactory {
        node AMM
        node "publicAPI" {
            circle getCollaterals
            circle makeVaultInvitation
            circle getRunIssuer
        }
        node "creatorFacet" {
            circle makeAddTypeInvitation
        }
    }
    node "Vault" {
        circle makeCloseInvitation
        makeCloseInvitation -u-> CloseVaultInvitation
        circle makeAdjustBalancesInvitation
        makeAdjustBalancesInvitation -u-> AdjustBalancesInvitation
        circle getCollateralAmount
        circle getCurrentDebt
    }
}
Borrower -> makeVaultInvitation: open vault and transfer collateral
makeVaultInvitation -d-> Vault
Borrower -u-> getPayout: retrieve any proceeds
Borrower -u-> getPayouts: retrieve any proceeds
Borrower -> AdjustBalancesInvitation: add or remove collateral or \nincrease or decrease the loan balance
Borrower -l-> CloseVaultInvitation: close loan and withdraw \nany remaining collateral
vfc -d-> makeAddTypeInvitation
Borrower -d-> getCurrentDebt: how much do I owe
Borrower -d-> getCollateralAmount: how much did I \ndeposit as collateral

@enduml

PlantUML version 1.2021.10(Mon Aug 30 06:43:48 PDT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>